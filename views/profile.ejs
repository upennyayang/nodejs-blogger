<% layout('layout') -%>

<div class="container">

    <div class="page-header">
        <div class="pull-right">
            <a href="/post" class="btn btn-primary">Create Post</a>
            <a href="/blog/<%=user.username%>" class="btn btn-primary">View My Blog</a>
            <a href="/logout" class="btn btn-default">Logout</a>
        </div>
        <h1><span class="fa fa-user"></span> Profile Page</h1>
    </div>

    <% if (typeof message !== 'undefined' && message.length > 0) { %>
        <div class="alert alert-danger"><%= message %></div>
    <% } %>


    <div class="panel">
        <div class="panel-heading">
          <span class="fa fa-laptop"></span> Local
        </div>
        <div class="panel-body">

            <div class="row">
                <div class="col-md-6">
                    <strong>Username</strong>: <%= user.username %><br>
                    <strong>Email</strong>: <%= user.email %><br>
                    <strong>Password</strong>: <%= user.password %><br>
                </div>
                <div class="col-md-6">


                <strong>Blog Title</strong>: <%= user.blogTitle %><br>
                <strong>Blog Description</strong>: <%= user.blogDescription %><br>
                <strong>Vanity url</strong>: <%= user.vanityUrl %><br>
                <strong>Tags</strong>: <%= user.tags %><br>

                </div>
            </div>

        </div>
    </div>

    <div class="panel">
        <div class="panel-heading">
            All Posts
        </div>
        <div class="panel-body">
            <table class="table table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Thumbnail</th>
                        <th>Title</th>
                        <th>Created Date</th>
                        <th>Updated Date</th>
                        <th>Delete</th>
                        <th>Edit</th>
                    </tr>
                </thead>
                <tbody>
                    <% for (var i=0; i < posts.length; i++ ) {%>
                        <% var post = posts[i]; %>
                        <tr data-id="<%= post._id %>">
                            <td><img src="<%= post.image %>" style="width: 400px"/></td>
                            <td><a href="/post/<%=post._id%>"><%= post.title %></a></td>
                            <td><%= prettyDate(post.releaseDate) %></td>
                            <td><%= prettyDate(post.modificationDate) %></td>
                            <td><a href="/post/delete?id=<%= post._id %>">Delete</a></td>
                            <td><a href="/post/edit?id=<%= post._id %>">Edit</a></td>
                        </tr>
                    <% } %>
                </tbody>
                <script>
                    $(".table>tbody>tr").on('click', function(e){
                        var postId = $(this).data("id");
                        window.open("/post/" + postId);
                        //window.location.href = "/post/" + postId;
                    })
                </script>
            </table>
        </div>
    </div>

</div>
